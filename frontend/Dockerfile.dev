# frontend/Dockerfile
FROM node:22-bookworm
WORKDIR /usr/src/app

# Copy manifests (include the lockfile!)
COPY package.json tsconfig.json next.config.ts ./

# Reproducible install
RUN npm install --no-audit --no-fund

# App source
COPY app ./app

# Build (ignore build failure during first-time hot-reload dev if you want)
RUN npm run build || true

CMD ["npm","run","dev","--","-p","3000","-H","0.0.0.0"]
